TAP version 14
Server started successfully
[
  {
    name: [32m'Rakshitha'[39m,
    Id: [33m90876[39m,
    userName: [32m'rakshithamattuga@gmail.com'[39m,
    preferences: [33m3[39m
  },
  { name: [32m'Ashritha'[39m, email: [32m'ashritha@gmail.com'[39m, preferences: [33m3[39m },
  {
    email: [32m'clark@superman.com'[39m,
    password: [32m'$2b$08$txTHiJUWEO58ueuU.znsEuNgEPiV8/1svItiGOQ7eTodyI2JVyNZ6'[39m,
    creationDate: [35m2024-06-02T16:39:35.755Z[39m,
    id: [33m8681[39m,
    preferences: [ [32m'movies'[39m, [32m'comics'[39m ],
    name: [32m'Clark Kent'[39m
  }
]
[90mundefined[39m
# Subtest: POST /users/signup
    ok 1 - should be equal
    1..1
ok 1 - POST /users/signup # time=158.079ms

# Subtest: POST /users/signup with missing email
    ok 1 - should be equal
    1..1
ok 2 - POST /users/signup with missing email # time=15.63ms

# Subtest: POST /users/login
    ok 1 - should be equal
    ok 2 - specified property should be defined own property
    1..2
ok 3 - POST /users/login # time=73.458ms

# Subtest: POST /users/login with wrong password
    ok 1 - should be equal
    1..1
ok 4 - POST /users/login with wrong password # time=59.366ms

# Subtest: GET /users/preferences
    not ok 1 - should be equal
      ---
      compare: ===
      at:
        fileName: test\server.test.js
        lineNumber: 56
        columnNumber: 7
        typeName: Test
      stack: |
        Test.<anonymous> (test/server.test.js:56:7)
      source: "tap.test('GET /users/preferences', async (t) => {\r
      
        \    const response = await
        server.get('/users/preferences').set('Authorization', `Bearer ${token}`);\r
      
        \    t.equal(response.status, 200);\r
      
        ------^
      
        \    t.hasOwnProp(response.body, 'preferences');\r
      
        \    t.same(response.body.preferences, mockUser.preferences);\n"
      diff: |
        --- expected
        +++ actual
        @@ -1,1 +1,1 @@
        -200
        +500
      ...
    
    not ok 2 - specified property should be defined own property
      ---
      at:
        fileName: test\server.test.js
        lineNumber: 57
        columnNumber: 7
        typeName: Test
      stack: |
        Test.<anonymous> (test/server.test.js:57:7)
      source: "    const response = await
        server.get('/users/preferences').set('Authorization', `Bearer ${token}`);\r
      
        \    t.equal(response.status, 200);\r
      
        \    t.hasOwnProp(response.body, 'preferences');\r
      
        ------^
      
        \    t.same(response.body.preferences, mockUser.preferences);\r
      
        \    t.end();\n"
      diff: |
        --- expected
        +++ actual
        @@ -1,1 +1,3 @@
        -preferences
        +Object {
        +  "message": "Internal Server Error",
        +}
      ...
    
    not ok 3 - should be equivalent
      ---
      diff: |
        --- expected
        +++ actual
        @@ -1,4 +1,1 @@
        -Array [
        -  "movies",
        -  "comics",
        -]
        +undefined
      at:
        fileName: test\server.test.js
        lineNumber: 58
        columnNumber: 7
        typeName: Test
      stack: |
        Test.<anonymous> (test/server.test.js:58:7)
      source: "    t.equal(response.status, 200);\r
      
        \    t.hasOwnProp(response.body, 'preferences');\r
      
        \    t.same(response.body.preferences, mockUser.preferences);\r
      
        ------^
      
        \    t.end();\r
      
        });\n"
      ...
    
    1..3
not ok 5 - GET /users/preferences # time=128.737ms
  ---
  at:
    fileName: test\server.test.js
    lineNumber: 54
    columnNumber: 5
    typeName: Object
  source: "// Preferences tests\r
  
    \r
  
    tap.test('GET /users/preferences', async (t) => {\r
  
    ----^
  
    \    const response = await
    server.get('/users/preferences').set('Authorization', `Bearer ${token}`);\r
  
    \    t.equal(response.status, 200);\n"
  ...

# Subtest: GET /users/preferences without token
    not ok 1 - should be equal
      ---
      compare: ===
      at:
        fileName: test\server.test.js
        lineNumber: 64
        columnNumber: 7
        typeName: Test
      stack: |
        Test.<anonymous> (test/server.test.js:64:7)
      source: "tap.test('GET /users/preferences without token', async (t) => {\r
      
        \    const response = await server.get('/users/preferences');\r
      
        \    t.equal(response.status, 401);\r
      
        ------^
      
        \    t.end();\r
      
        });\n"
      diff: |
        --- expected
        +++ actual
        @@ -1,1 +1,1 @@
        -401
        +500
      ...
    
    1..1
not ok 6 - GET /users/preferences without token # time=24.988ms
  ---
  at:
    fileName: test\server.test.js
    lineNumber: 62
    columnNumber: 5
    typeName: Object
  source: "});\r
  
    \r
  
    tap.test('GET /users/preferences without token', async (t) => {\r
  
    ----^
  
    \    const response = await server.get('/users/preferences');\r
  
    \    t.equal(response.status, 401);\n"
  ...

# Subtest: PUT /users/preferences
    not ok 1 - should be equal
      ---
      compare: ===
      at:
        fileName: test\server.test.js
        lineNumber: 72
        columnNumber: 7
        typeName: Test
      stack: |
        Test.<anonymous> (test/server.test.js:72:7)
      source: "        preferences: ['movies', 'comics', 'games']\r
      
        \    });\r
      
        \    t.equal(response.status, 200);\r
      
        ------^
      
        });\n"
      diff: |
        --- expected
        +++ actual
        @@ -1,1 +1,1 @@
        -200
        +500
      ...
    
    1..1
not ok 7 - PUT /users/preferences # time=26.519ms
  ---
  at:
    fileName: test\server.test.js
    lineNumber: 68
    columnNumber: 5
    typeName: Object
  source: "});\r
  
    \r
  
    tap.test('PUT /users/preferences', async (t) => {\r
  
    ----^
  
    \    const response = await
    server.put('/users/preferences').set('Authorization', `Bearer
    ${token}`).send({\r
  
    \        preferences: ['movies', 'comics', 'games']\n"
  ...

# Subtest: Check PUT /users/preferences
    not ok 1 - should be equal
      ---
      compare: ===
      at:
        fileName: test\server.test.js
        lineNumber: 77
        columnNumber: 7
        typeName: Test
      stack: |
        Test.<anonymous> (test/server.test.js:77:7)
      source: "tap.test('Check PUT /users/preferences', async (t) => {\r
      
        \    const response = await
        server.get('/users/preferences').set('Authorization', `Bearer ${token}`);\r
      
        \    t.equal(response.status, 200);\r
      
        ------^
      
        \    t.same(response.body.preferences, ['movies', 'comics', 'games']);\r
      
        \    t.end();\n"
      diff: |
        --- expected
        +++ actual
        @@ -1,1 +1,1 @@
        -200
        +500
      ...
    
    not ok 2 - should be equivalent
      ---
      diff: |
        --- expected
        +++ actual
        @@ -1,5 +1,1 @@
        -Array [
        -  "movies",
        -  "comics",
        -  "games",
        -]
        +undefined
      at:
        fileName: test\server.test.js
        lineNumber: 78
        columnNumber: 7
        typeName: Test
      stack: |
        Test.<anonymous> (test/server.test.js:78:7)
      source: "    const response = await
        server.get('/users/preferences').set('Authorization', `Bearer ${token}`);\r
      
        \    t.equal(response.status, 200);\r
      
        \    t.same(response.body.preferences, ['movies', 'comics', 'games']);\r
      
        ------^
      
        \    t.end();\r
      
        });\n"
      ...
    
    1..2
not ok 8 - Check PUT /users/preferences # time=38.853ms
  ---
  at:
    fileName: test\server.test.js
    lineNumber: 75
    columnNumber: 5
    typeName: Object
  source: "});\r
  
    \r
  
    tap.test('Check PUT /users/preferences', async (t) => {\r
  
    ----^
  
    \    const response = await
    server.get('/users/preferences').set('Authorization', `Bearer ${token}`);\r
  
    \    t.equal(response.status, 200);\n"
  ...

# Subtest: GET /news
    not ok 1 - should be equal
      ---
      compare: ===
      at:
        fileName: test\server.test.js
        lineNumber: 86
        columnNumber: 7
        typeName: Test
      stack: |
        Test.<anonymous> (test/server.test.js:86:7)
      source: "tap.test('GET /news', async (t) => {\r
      
        \    const response = await server.get('/news').set('Authorization', `Bearer
        ${token}`);\r
      
        \    t.equal(response.status, 200);\r
      
        ------^
      
        \    t.hasOwnProp(response.body, 'news');\r
      
        \    t.end();\n"
      diff: |
        --- expected
        +++ actual
        @@ -1,1 +1,1 @@
        -200
        +404
      ...
    
    not ok 2 - specified property should be defined own property
      ---
      at:
        fileName: test\server.test.js
        lineNumber: 87
        columnNumber: 7
        typeName: Test
      stack: |
        Test.<anonymous> (test/server.test.js:87:7)
      source: "    const response = await server.get('/news').set('Authorization',
        `Bearer ${token}`);\r
      
        \    t.equal(response.status, 200);\r
      
        \    t.hasOwnProp(response.body, 'news');\r
      
        ------^
      
        \    t.end();\r
      
        });\n"
      diff: |
        --- expected
        +++ actual
        @@ -1,1 +1,1 @@
        -news
        +Object {}
      ...
    
    1..2
not ok 9 - GET /news # time=46.321ms
  ---
  at:
    fileName: test\server.test.js
    lineNumber: 84
    columnNumber: 5
    typeName: Object
  source: "// News tests\r
  
    \r
  
    tap.test('GET /news', async (t) => {\r
  
    ----^
  
    \    const response = await server.get('/news').set('Authorization', `Bearer
    ${token}`);\r
  
    \    t.equal(response.status, 200);\n"
  ...

# Subtest: GET /news without token
    not ok 1 - should be equal
      ---
      compare: ===
      at:
        fileName: test\server.test.js
        lineNumber: 93
        columnNumber: 7
        typeName: Test
      stack: |
        Test.<anonymous> (test/server.test.js:93:7)
      source: "tap.test('GET /news without token', async (t) => {\r
      
        \    const response = await server.get('/news');\r
      
        \    t.equal(response.status, 401);\r
      
        ------^
      
        \    t.end();\r
      
        });\n"
      diff: |
        --- expected
        +++ actual
        @@ -1,1 +1,1 @@
        -401
        +404
      ...
    
    1..1
not ok 10 - GET /news without token # time=35.969ms
  ---
  at:
    fileName: test\server.test.js
    lineNumber: 91
    columnNumber: 5
    typeName: Object
  source: "});\r
  
    \r
  
    tap.test('GET /news without token', async (t) => {\r
  
    ----^
  
    \    const response = await server.get('/news');\r
  
    \    t.equal(response.status, 401);\n"
  ...

1..10
